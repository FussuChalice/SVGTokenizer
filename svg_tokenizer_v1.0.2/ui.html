<body><style>body{background-color:var(--figma-color-bg);margin:0;padding:0}#plugin-content{display:flex;flex-direction:column;height:100%;width:100%}#top-layout{height:255px}#code-preview,#top-layout{border-bottom:1px solid var(--figma-color-bg-tertiary);display:flex;flex-direction:row;width:100%}#code-preview{max-height:260px}#colors-preview{height:100%;overflow-y:scroll;width:50%}#layout-preview-with-binoculars{display:flex;flex-direction:column;height:100%;width:50%}#code-container{overflow:scroll}#code-container,#preview-svg{background-color:#fff;height:100%}#preview-svg{align-items:center;display:flex;justify-content:center;width:100%}#preview-svg svg{height:128px;width:128px}#actions-with-code{border-left:1px solid var(--figma-color-bg-tertiary);flex-direction:column;gap:10px;padding:10px 10px 0;width:60px}#actions-with-code,#copy-code{align-items:center;display:flex}#copy-code{background-color:var(--figma-color-bg-brand);border-radius:8px;height:40px;justify-content:center;width:40px}#copy-code:hover{background-color:var(--figma-color-bg-brand-hover);cursor:pointer}#copy-code-as-file{align-items:center;border-radius:8px;display:flex;height:40px;justify-content:center;width:40px}#copy-code-as-file:hover{background-color:var(--figma-color-bg-brand-tertiary);cursor:pointer}#copy-as-file{fill:var(--figma-color-text)}#bottom-bar{align-items:center;display:flex;flex-direction:row;height:100%;justify-content:space-between;width:100%}#link-to-github-project{cursor:pointer;display:flex;flex-direction:row;gap:7px;padding-left:16px}#link-to-github-project-text{color:var(--figma-color-text);font-family:Inter;font-size:12px;font-weight:500}#link-to-github-project:hover #link-to-github-project-text{text-decoration:underline}#plugin-version{color:var(--figma-color-text);font-family:Inter;font-size:12px;font-weight:500;padding-right:16px}#colors-pull{width:100%}.color-with-block{align-items:center;display:flex;flex:1;flex-direction:row;gap:6px;justify-content:center;padding:10px}.color-block{background-color:var(--figma-color-bg-secondary);height:14px;width:14px}.color-hex-color{width:60px}.color-hex-color,.color-variable{color:var(--figma-color-text);font-family:Inter;font-size:14px}td{border:1px solid var(--figma-color-bg-tertiary)}tr{cursor:pointer;display:flex;flex-direction:row;width:100%}tr:hover{background-color:var(--figma-color-bg-onselected-hover)}.color-with-variable{align-items:center;display:flex;flex:1;flex-direction:row;justify-content:center;padding:10px}</style><style>/*! Color themes for Google Code Prettify | MIT License | github.com/jmblog/color-themes-for-google-code-prettify */.prettyprint{background:#fff;font-family:Menlo,Bitstream Vera Sans Mono,DejaVu Sans Mono,Monaco,Consolas,monospace;border:0!important}.pln{color:#333}ol.linenums{margin-top:0;margin-bottom:0;color:#ccc}li.L0,li.L1,li.L2,li.L3,li.L4,li.L5,li.L6,li.L7,li.L8,li.L9{padding-left:1em;background-color:#fff;list-style-type:decimal}@media screen{.str{color:#d14}.kwd{color:#333}.com{color:#998}.typ{color:#458}.lit{color:#458}.pun{color:#333}.opn{color:#333}.clo{color:#333}.tag{color:navy}.atn{color:teal}.atv{color:#d14}.dec{color:#333}.var{color:teal}.fun{color:#900}}</style><div id="plugin-content"><div id="top-layout"><div id="colors-preview"><table style="width:100%"><tbody id="colors-pull"></tbody></table></div><div id="layout-preview-with-binoculars"><div id="preview-svg"></div></div></div><div id="code-preview"><div id="code-container"></div><div id="actions-with-code"><div id="copy-code"><svg id="copy" width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.1339 4H5.86607C4.83547 4 4 4.98737 4 6.20536V14.7946C4 16.0126 4.83547 17 5.86607 17H13.1339C14.1645 17 15 16.0126 15 14.7946V6.20536C15 4.98737 14.1645 4 13.1339 4Z" stroke="white" stroke-linejoin="round"/><path d="M11.9836 3.59524L12 2.66667C11.9986 2.09253 11.805 1.54238 11.4615 1.13641C11.118 0.730431 10.6525 0.501633 10.1667 0.5H3.09524C2.54005 0.501939 2.00807 0.763446 1.61549 1.2274C1.22292 1.69136 1.00164 2.32006 1 2.97619V11.3333C1.00138 11.9075 1.19498 12.4576 1.5385 12.8636C1.88202 13.2696 2.34753 13.4984 2.83333 13.5H3.61905" stroke="white" stroke-linecap="round" stroke-linejoin="round"/></svg></div><div id="copy-code-as-file"><svg id="copy-as-file" width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.5625 0.53125H9.47383L14.4375 6.03153V18.4688H0.5625V0.53125ZM1.71875 1.8125V17.1875H13.2812V6.9375H8.65625V1.8125H1.71875ZM9.8125 2.71847L12.4637 5.65625H9.8125V2.71847Z" fill="var(--figma-color-text)"/></svg></div></div></div><div id="bottom-bar"><div id="link-to-github-project"><svg id="github" width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 0.5C3.13438 0.5 0 3.71562 0 7.67812C0 10.85 2.00625 13.5375 4.7875 14.4875C4.82651 14.496 4.86633 14.5002 4.90625 14.5C5.16563 14.5 5.26562 14.3094 5.26562 14.1437C5.26562 13.9719 5.25938 13.5219 5.25625 12.9219C5.0247 12.9762 4.78782 13.0045 4.55 13.0062C3.20313 13.0062 2.89687 11.9594 2.89687 11.9594C2.57812 11.1312 2.11875 10.9094 2.11875 10.9094C1.50938 10.4812 2.11562 10.4687 2.1625 10.4687H2.16563C2.86875 10.5312 3.2375 11.2125 3.2375 11.2125C3.5875 11.825 4.05625 11.9969 4.475 11.9969C4.75189 11.9913 5.02449 11.9274 5.275 11.8094C5.3375 11.3469 5.51875 11.0312 5.71875 10.85C4.16563 10.6687 2.53125 10.0531 2.53125 7.30312C2.53125 6.51875 2.80312 5.87812 3.25 5.37812C3.17812 5.19687 2.9375 4.46562 3.31875 3.47812C3.36989 3.46589 3.42245 3.46063 3.475 3.4625C3.72812 3.4625 4.3 3.55937 5.24375 4.21562C6.39048 3.89478 7.60327 3.89478 8.75 4.21562C9.69375 3.55937 10.2656 3.4625 10.5188 3.4625C10.5713 3.46063 10.6239 3.46589 10.675 3.47812C11.0563 4.46562 10.8156 5.19687 10.7437 5.37812C11.1906 5.88125 11.4625 6.52187 11.4625 7.30312C11.4625 10.0594 9.825 10.6656 8.26562 10.8437C8.51562 11.0656 8.74063 11.5031 8.74063 12.1719C8.74063 13.1312 8.73125 13.9062 8.73125 14.1406C8.73125 14.3094 8.82812 14.5 9.0875 14.5C9.12949 14.5002 9.17138 14.496 9.2125 14.4875C11.9969 13.5375 14 10.8469 14 7.67812C14 3.71562 10.8656 0.5 7 0.5Z" fill=" var(--figma-color-text)"/></svg> <span id="link-to-github-project-text">Github project</span></div><div id="plugin-version">v1.0.2</div></div></div><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script><script>const GITHUB_PROJECT_URL="https://github.com/FussuChalice/SVGTokenizer";document.getElementById("link-to-github-project")?.addEventListener("click",(()=>{window.open(GITHUB_PROJECT_URL,"_blank")}));let svgColorCodes=null;const renderColorsTable=e=>{svgColorCodes=e;const o=document.getElementById("colors-pull");o.innerHTML="";const t=e.map((({color:e,variable:o,id:t})=>`\n      <tr>\n        <td class="color-with-block" data-color="${e}" data-variable="${o}" data-id="${t}">\n          <div class="color-block" style="background-color: ${e}"></div>\n          <div class="color-hex-color">${e}</div>\n        </td>\n        <td class="color-with-variable">\n          <div class="color-variable" ${"-"===o?'style="background-color: red;"':""}>\n            ${"-"===o?"!VAR NOT FOUND!":o}\n          </div>\n        </td>\n      </tr>\n    `)).join("");o.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".color-with-block").forEach((e=>{e.addEventListener("click",(({target:e})=>{const{color:o,variable:t,id:l}=e.closest("td").dataset;parent.postMessage({pluginMessage:{type:"selectLayer",color:o,variable:t,id:l}},"*")}))}))},replaceColorsWithVariables=(e,o)=>e.reduce(((e,{color:o,variable:t})=>t&&"-"!==t?e.replace(new RegExp(o,"gi"),`var(--${t})`):e),o),escapeHtml=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),injectColorVariables=e=>{if(!e)return;const o=`:root {\n    ${e.map((({color:e,variable:o})=>o?`--${o}: ${e};`:"")).join("\n    ")}\n  }`,t=document.createElement("style");t.textContent=o,document.body.appendChild(t)},previewSVG=e=>{injectColorVariables(svgColorCodes),document.getElementById("preview-svg")?.insertAdjacentHTML("beforeend",e)},previewSVGCode=e=>{const o=document.getElementById("code-container"),t=replaceColorsWithVariables(svgColorCodes,e);o.innerHTML=`<pre class="prettyprint lang-html linenums" id="code">${escapeHtml(t)}</pre>`,previewSVG(t),PR.prettyPrint()},saveSvgToFile=e=>{const o=new Blob([e],{type:"image/svg+xml"}),t=document.createElement("a");t.download="svg_file.svg",t.href=URL.createObjectURL(o),t.click(),URL.revokeObjectURL(t.href),parent.postMessage({pluginMessage:{type:"alert",data:"SVG file saved successfully!"}},"*")},setupEventHandlers=e=>{document.getElementById("copy-code-as-file")?.addEventListener("click",(()=>saveSvgToFile(replaceColorsWithVariables(svgColorCodes,e)))),document.getElementById("copy-code")?.addEventListener("click",(()=>{try{navigator.clipboard.writeText(replaceColorsWithVariables(svgColorCodes,e)),parent.postMessage({pluginMessage:{type:"alert",data:"SVG copied to clipboard!"}},"*")}catch(e){console.error("Failed to copy to clipboard:",e),parent.postMessage({pluginMessage:{type:"alert",data:"Failed to copy SVG to clipboard."}},"*")}}))};onmessage=e=>{const{type:o,data:t}=e.data.pluginMessage;"colors"===o&&renderColorsTable(t),"svg-code"===o&&(previewSVGCode(t),setupEventHandlers(t))};</script></body>